const{ipcRenderer:ipcRenderer}=require("electron");let tmpEmpl,dateNow,users,barcode=document.querySelector("#barcode"),title=document.querySelector("#title"),color=document.querySelector("#color"),quantity=document.querySelector("#quantity"),priceNight=document.querySelector("#priceNight"),itemsState=document.querySelector("#itemsState"),create=document.querySelector("#create"),expensesDetails=document.querySelector("#expensesDetails"),price=document.querySelector("#price"),expensesType=document.querySelector("#expensesType"),expensesDate=document.querySelector("#expensesDate"),dateOtherExp=document.querySelector("#dateOtherExp"),otherExpenses=document.querySelector("#otherExpenses"),otherPrice=document.querySelector("#otherPrice"),otherDetails=document.querySelector("#otherDetails"),addSalary=document.querySelector("#addSalary"),employeeName=document.querySelector("#employeeName"),datePayroll=document.querySelector("#datePayroll"),month=document.querySelector("#month"),paidPay=document.querySelector("#salaryPay"),inputSalary=document.querySelector("#inputSalary"),inputremain=document.querySelector("#inputremain"),nameEmployee=document.querySelector("#name"),idPersonal=document.querySelector("#idPersonal"),phone=document.querySelector("#phone"),job=document.querySelector("#job"),salary=document.querySelector("#salary"),date=new Date;dateNow=date.getMonth()+1<10&&date.getDate()<10?`${date.getFullYear()}-0${date.getMonth()+1}-0${date.getDate()}`:date.getMonth()+1<10&&date.getDate()>10?`${date.getFullYear()}-0${date.getMonth()+1}-${date.getDate()}`:date.getMonth()+1>10&&date.getDate()<10?`${date.getFullYear()}-${date.getMonth()+1}-0${date.getDate()}`:`${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`,users=null!=localStorage.allUsers?JSON.parse(localStorage.allUsers):[],expensesDate.value=dateNow;let userName=document.querySelector(".userName"),dateAndTime=document.querySelector(".dateAndTime");userName.innerHTML=localStorage.getItem("userNameView"),dateAndTime.innerHTML=dateNow;let tmp,mood="create";function showInputs1(){document.querySelector(".inputsSalary").style.display="block",document.querySelector(".inputsexpenses").style.display="none",document.querySelector(".inputsOther").style.display="none"}let tmpIdDelete,expenses=[];function createExpenses(){if(""!=expensesDate.value&&""!=expensesType.value&&""!=price.value){let e={expensesDate:expensesDate.value,user:userName.innerHTML,expensesType:expensesType.value,price:price.value,expensesDetails:expensesDetails.value};"create"==mood?(expenses.push(e),ipcRenderer.send("myExpenses",e)):ipcRenderer.send("update-expenses",{...e,tmp:tmp})}showExpenses()}function showExpenses(){let e="";ipcRenderer.send("get-expenses","bing"),ipcRenderer.on("get-expenses",((t,n)=>{const s=JSON.parse(n);expenses.push(s),e="",s.map((t=>{e+=`\n            <tr>\n                <td>${t.myExpenses.expensesDate}</td>\n                <td>${t.myExpenses.expensesType}</td>\n                <td>${t.myExpenses.price}</td>\n                <td>${t.myExpenses.expensesDetails}</td>\n                <td><button onclick="updateData('${t._id}');">تعديل</button></td>\n                <td><button onclick="deleteData('${t._id}');">حذف</button></td>\n            </tr>\n        `})),document.querySelector(".tbodyExpenses").innerHTML=e}))}function updateData(e){document.querySelector(".inputs").style.display="block",tmp=e;for(let t=0;t<expenses[expenses.length-1].length;t++)if(expenses[expenses.length-1][t]._id===e){let e=expenses[expenses.length-1][t].myExpenses;expensesType.value=e.expensesType,expensesDate.value=e.expensesDate,price.value=e.price,expensesDetails.value=e.expensesDetails}expensesType.focus(),scroll({top:0,behavior:"smooth"}),create.innerHTML="تحديث البيانات",mood="update"}function deleteData(e){for(let t=0;t<users.length;t++)userName.innerHTML!=users[t].user||"it"!=users[t].job&&"مدير"!=users[t].job||(document.querySelector(".alarm").style.display="block",tmpIdDelete=e)}function checkPass(){ipcRenderer.send("delete-expenses",tmpIdDelete),window.location.reload(),showExpenses()}function exitePass(){window.location.reload()}function refresh(){window.location.reload()}showExpenses();